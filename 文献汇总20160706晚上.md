




tags: "文献汇总"


# 1.点云拼接的两种主要方法




##1.依赖硬件的拼接如标签定位拼接、回转拼接等

标签定位拼接利用物体测量时，在物体表面明显的地方预先设置特征标志点，再根据这些标志点将多点云数据拼接，该方法具有稳定性、拓扑任意性、整体连续灵活性等特点，但该方法不能用于文物、大型建筑物等不能预先设置标志点的物体；回转拼接是将被测物体放在可以旋转360°的转动台上测量，再借助高精度、垂直放置的参考平面，在测量的同时，计算出多片点云的变换矩阵，该方法精度高，但只适用于较小物体的测量。由于这两种方法的限制，不能对大型物体和表面保护的物体进行测量，人们研究一种脱离于硬件依赖的拼接方法




##2.脱离于硬件依赖的拼接方法

Paul J．等人最早提出了ICP(iterative Closest Pon)算法，该方法较好地解决了点云模型拼接的难题，但需要较好的初始位置，对于复杂模型可能导致收敛失败；为了使ICP算法更加稳定，Gelfend等人限制匹配点的选择，达到最小化迭代中的不确定性使得算法更加稳定；对于复杂表面的点云模型，Richard等人用曲率将点云分为不同的部分，再对各部分进行ICP算法处理，

获得了比传统算法更好的效果。







#2.ICP算法

##1.ICP算法分为粗拼接和精拼接

对于大规模的点云，粗拼接一般用三点法或多点法获得点云的初始位置，精确拼接用最短距离匹配对应点实现IcP算法，迭代至误差范围之内。该算法的几个关键技术是快速查找最近点、求解变换和较好的初始位置定位

##2.kd树的建立

构造根节点，使根节点对应于k维空间中包含所有实例点的超矩形区域；通过下面的递归方法，不断地对k维空间进行划分，生成子节点。在超矩形区域上选择一个坐标轴和在此坐标轴上的一个切分点，确定一个超平面，这个超平面通过选定的切分点并垂直于选定的坐标轴，将当前超矩形区域且分为左右两个子区域；这时，实例点被分到两个子区域。这个过程直到子区域内没有实例时终止，终止时的结点即为叶子结点。

##3.最近邻查询

###1. 

根据查找点，从根节点开始，递归地遍历整棵树，如果查找点小于当前节点的维度值，则从左边遍历，相反，则从右边。




###2.

一旦当前节点为叶子节点时，设定该叶子节点的点为“当前最好的点”。




###3.

算法递归地遍历这个树，在每个节点遵循如下步骤：




	a.如果当前节点比“当前最好的点"距离还要近，设置该点为“当前最好点”。




	b.算法遍历其他分支，判定是否有其他点比当前的“当前最好点”到查找点的距离还近。即判定以查找点为圆心，当前最短距离为半径的球，如果当前节点在该球内(当前节点所有维度到查找点的距离之和比“当前最好点”的小)，继续遍历这个分支，直到找到最近点；如果当前节点不在球内，查找其他分支。

##4.点云去噪

###1.点云邻域

点云数据是无拓扑结构的散乱点云，无法像图像去噪方法快速地获得邻域信息，因此首先建立数据结构，能够方便地获得点云邻域。一般地，可以构造以距离r范围的局部邻域和k个最近点的局部邻域。




第一种距离邻域是在采样点p为中心，半径为r内的所有点为该采样点的邻域点Nbhd(p),

![](http://7xvzfz.com1.z0.glb.clouddn.com/%E7%82%B9%E4%BA%91r%E9%82%BB%E5%9F%9F%E5%85%AC%E5%BC%8F.png)




这种方式适合点云表面数据规则，去噪使得在r-球内包含几乎相等的点数量。对于表面密度不均匀的数据去噪，距离邻域就会使得算法不可靠。




第二种是k最近邻域，采样点p有最近k邻域集合

![](http://7xvzfz.com1.z0.glb.clouddn.com/%E7%82%B9%E4%BA%91k%E9%82%BB%E5%9F%9F%E9%9B%86%E5%90%88.png)，

![](http://7xvzfz.com1.z0.glb.clouddn.com/%E7%82%B9%E4%BA%91k%E9%82%BB%E5%9F%9F%E9%9B%86%E5%90%88%E5%85%AC%E5%BC%8F.png)







点云结构如下图所示。

![](http://7xvzfz.com1.z0.glb.clouddn.com/%E7%82%B9%E4%BA%91%E7%9A%84%E4%B8%A4%E7%A7%8D%E9%A2%86%E5%9F%9F.png)




###2.邻域属性去噪

对于距离邻域，设定阈值m，则可以判定采样点p最近k邻域集合的点数小于m时，该点为噪声点，那么去除该点，把这种方法叫做去除离群点。而对于最近K邻域，可以构造一个统计离群点过滤算法。该算法流程如下：

	

(1)遍历所有点求得该点云的平均距离mean和标准差stddev。对点云建立KD树，对每个点查找k个最近点邻域，并求得局部平均距离，再对所有的点求得整个点云的平均距离孑，计算公式如下：![](http://7xvzfz.com1.z0.glb.clouddn.com/%E7%82%B9%E4%BA%91%E7%9A%84%E5%B9%B3%E5%9D%87%E8%B7%9D%E7%A6%BB.png)

其中，K为当前r邻域的点数，$d_i$为当前点到r邻域内第i个点的距离，$d_j$为当前第j个点到K邻近点的平均距离，N为点云的数量，d为点云的平均距离。
(2)设定距离阈值distance_threshold=mean+stddeV*parameter。
(3)遍历所有的点，并求它的平均距离mean，mean>distance—threshold，则认定它为噪声点。










##5.点云的粗拼接

由于IcP算法需要一个合理的初始位置，那么三对不共线的匹配可以确定两个模型之间的初始坐标变换，称之为三点法，它是由Chuan在其拼接方法中最早提出的。对于曲面特征明显的点云，可以根据曲面自身的特征，计算得到若干个不同视角下点云的匹配点，如Makadia等人根据局部特征将兔子和房子自动拼接。但对于测量得到的点云数据，曲面复杂，点云数量多且受噪声影响，自动拼接完全是不可能的。这就需要人工确定三对匹配点，根据它们确定点云的初始位置。



#3.ICP算法的优化

##1.针对对应集的查找进行优化
###1.基于曲率统计的ICP拼接
（1）点云的曲率估计
点云模型的曲面表面信息主要为三维坐标信息，随着点云模型的刚性变换，三维坐标也会改变，因此坐标值作为曲面的真实信息是对刚性变换可变的，依赖距离迭代可能收敛失败。特征点是曲面几何形状的最基本的特征基元，最常用的曲面特征是曲率，它是曲面固有的几何属性，散乱点云数据的曲率估算方法，国内外已有一定的研究。Milroy等人在局部坐标系中用二次参数曲面逼近局部点云，并用曲率的微分性在OSC
(Ortalgonal cross section)模型上估算当前点的曲率。Yang等人利用计算二次参数曲面的方法估算曲率特征，对局部的点用最小二乘法拟合参数曲面，并求得曲率。Huang等人在三角网格模型上估算曲率。因为我们得到的点云数据为散乱点云，所以先构造局部邻域，再用二次参数曲面去拟合。
（2）点云曲率统计的特征计算
在点云拼接的点匹配时，利用当前点的曲率为特征在另一片点云查找对应特征最相似的点为当前点的对应点。而对于大规模受噪声影响的点云数据，虽然己经去噪和精简，去除了明显的离群点和噪声点，但以曲率表示当前点的特征时，还不能完全有效地表征几何信息以至于能够较好地匹配对应点。因此，在曲率计算的基础上，提出了基于曲率统计的特征。该特征描述子(特征的描述量)考虑了当前点的曲率和局部邻域内的曲率关系，并把周边的曲率以正态统计存储。
    
(a)对散乱点云建立KD树，并查找k个最近点，估算出点云的平均距离m。
(b)对散乱点云中每个点进行参数曲面拟合，求得曲率值。
(c)对于点云中的一点$p_i$,己知曲率$c_i$，查找到当前点的邻域Nbhd($p_i$)。那么查找所有点p$\sigma$(j)$\in$Nbhd($p_i$)的曲率与$c_i$比较，记曲率c。记曲率p$\sigma$(j)与$c_i$相差最大时，设idc=$\sigma$(j).
(d)如果己知idc，可得与$p_i$的距离dist，构造局部邻域$ \begin{Vmatrix} \\ p_u - p_i \\ \end{Vmatrix} \leq\epsilon m$，且
$p_u\in nbhd(p_i)$。
(e)在局部邻域内的$p_u$的曲率为$c_u$,对这些点进行正态分布统计，求得它们的平均曲率u和标准差o。并设4维变量，将ci，dist，u，o放入在4维变量中，来表征当前点的特征描述子。
(f)算法结束。如果无法获得idc，那么将dist，u，o都设置为零。
下图为基于曲率统计的特征
![基于曲率统计的特征](http://7xvzfz.com1.z0.glb.clouddn.com/%E5%9F%BA%E4%BA%8E%E6%9B%B2%E7%8E%87%E7%BB%9F%E8%AE%A1%E7%9A%84%E7%89%B9%E5%BE%81.png)


　　基于曲率统计的特征描述了当前点周围与它曲率差别最大的点分布情况。算法根据点平均距离的大小先构造一个r．邻域Nbhd($p_i$)，并在Nbhd($Q_i$)内找到曲率与当前点差异大的点，并统计它周围的曲率隋况。如图3．6(b)所示，pi在其邻域内曲率差异明显的点为$p_{idc}$，那么就统计2个圆邻域相交的区域点曲率情况，为了统计方便，假定是正态分布，用2个变量表示平均曲率u和标准差o，可以得到另外2个变量$p_{idc}$和pi距离值、pi曲率。那么把这4个变量值组成一个四维的变量，来表示$p_i$的局部特征。
　　对于点云中的某个点，可能它的曲率特征不明显(局部区域内有许多与它曲率相差无几的点)，那么在对应点对匹配时，根据它的曲率可能产生多个可匹配的点，这将会导致无法正确地找到对应点。为了使曲率特征强化，一个曲率值肯定不能来表示这个局部区域的特征，本文引进了这个基于曲率统计的特征描述子。该描述子的特点在于能够找到当前点局部区域内曲率特征很明显的点，并找到这个点与当前点的关系，通过它周围曲率值的正态分布统计，强化了该特征的表示。对于该特征说明以下两点。
　　(1)在局部区域内找曲率差异最大点时，如果所有的点曲率与当前点都很小，那么假定该点在平面内，设定一个阈值来衡量，即$\begin{Vmatrix} \\ p_u - p_i \\ \end{Vmatrix}\leq\lambda$。那么dist=u=o=0。
　　(2)$p_{idc}$局部区域球的半径$\epsilon m$和$p_i$球的局部区域关系$$\epsilon m\leq p_i$$这样即避免重复，又计算方便。
　　该特征描述子定义目的的主要思想是在各个点云中的点之间进行对应点匹配时，借用附近特征明显的点(如峰、谷等)，更好地找到另外点云中相对应的点。但对于点在平面时，无法找到特征明显的点，只能通过当前点的曲率匹配。这样做的优点在于，一是使得点云数据表面特征明显的点能够快速正确地匹配，这会使得无论粗拼接位置怎样，都能使得拼接总体不出差错；二是点通过附近特征明显点的关系，也能够较正确地匹配。因为对于ICP算法，对应点匹配是至关重要的，直接影响着迭代收敛和拼接效果，正确的匹配使得它能够成功拼接。对于表面复杂的点云数据，该方法能够较好地拼接两片点云，但在平坦的局部区域，最终退化为通过曲率匹配，因为曲率也可能相等，最终可能退化为通过最短距离匹配。
###2.基于点三维不变矩特征估计及拼接
（1）二维不变矩
　　矩是描述图像特征的算子，一般可以分为正交矩、复数矩、旋转矩和几何矩，在模式识别与图像分析领域中有广泛的应用。其中，图像的几何不变矩表征了图像区域的几何特征，由于它具有平移、旋转、尺度等不变性，在图像处理中，几何不变矩作为一个重要的特征来表示物体，常用在图像分类、目标识别、匹配等领域。柳林霞等人利用图像的不变矩进行目标性状识别，并比较了基于区域的不变矩和基于边界的不变矩的不同；夏永泉等用不变矩进行图像匹配。Hu在1962年最先提出了7个不变矩，此后学者们在基础上对其进行改进。
　　对于任意非负整数p、ｑ，一个连续二维分布函数ｆ（ｘ，ｙ）在$R^2$连续平面上的p+q阶矩定义为：
　　![二维函数p+q阶矩](http://7xvzfz.com1.z0.glb.clouddn.com/%E4%BA%8C%E7%BB%B4%E5%88%86%E5%B8%83%E5%87%BD%E6%95%B0p%2Bq%E9%98%B6%E7%9F%A9.png)
　　其中p,q=0,1,2···，$m_{pq}$表示x的阶为p，y的阶为q的不变矩值。因为不具有平移不变性，所以定义阶的中心矩:
　　![二维函数p+q阶中心矩](http://7xvzfz.com1.z0.glb.clouddn.com/%E4%BA%8C%E7%BB%B4%E5%88%86%E5%B8%83%E5%87%BD%E6%95%B0p%2Bq%E9%98%B6%E4%B8%AD%E5%BF%83%E8%B7%9D.png)
　　其中p,q=0,1,2···，$\hat{x}$和$\hat{y}$分别表示x和y方向的平均值，对于数字图像，f(x,y)是图像的灰度，用求和代替积分
　　![求和代替公式](http://7xvzfz.com1.z0.glb.clouddn.com/%E4%BA%8C%E7%BB%B4%E5%88%86%E5%B8%83%E5%87%BD%E6%95%B0p%2Bq%E9%98%B6%E4%B8%AD%E5%BF%83%E7%9F%A9%E6%B1%82%E5%92%8C%E4%BB%A3%E6%9B%BF%E5%BC%8F.png)
　　hu最初提出了个不变矩，称为hu不变矩，广泛用在目标识别和字符识别中，这个不变矩公式如下表示
　　![hu不变矩](http://7xvzfz.com1.z0.glb.clouddn.com/hu%E4%B8%8D%E5%8F%98%E7%9F%A9.png)
　　这个不变矩在平移、旋转、约束缩放变换下是不变的，也证明利用二阶和三阶中心矩组成的矩组，对平移、旋转和尺度均不变。通过对不变矩分析可知，中心矩消除图像平移的影响，使得矩具有平移不变性；通过构造不变矩组成的矩组实现矩的（非约
束）缩放不变性和旋转不变性。为了实现矩的约束缩放不变性，可以通过矩的归一化，对$\mu$进行归一化如下：
　　$$\eta=\frac{\mu_{pq}}{\mu_{00}^{\frac{p+q}{2+1}}}$$
　　它具有平移和约束缩放不变性，但没有非约束缩放不变性和旋转不变性。
　　
　　（２）拓展的三维不便矩
　　几何矩和几何中心矩在二维图像中用于描述区域的形状，为了表示三维点云的特征，可以方便地将不变矩扩展到三维。假设密度分布函数为f(x,y,z)，则(p,q,r)矩定义如下：
　　$$m_{pgr}=\int\int\int_{R^3}{x^py^qz^rf(x,y,z)dxdydz}$$,   p,q,r=0,1,2···
　　$R^3$表示在当前点的局部球邻域内，那么，对于离散的点云数据，（P+q+r)中心矩可以表示为如下：
　　![离散点云中心矩](http://7xvzfz.com1.z0.glb.clouddn.com/%E7%A6%BB%E6%95%A3%E7%82%B9%E4%BA%91%EF%BC%88p%2Bq%2Br%EF%BC%89%E4%B8%AD%E5%BF%83%E7%9F%A9.png)
　　在这里，p,q,r=0,1,2···，f(x,yz)为当前点颜色的灰度值而对于无颜色的点云数据，设定f(x,y,z)=1。根据文献的方法，构造3个不变矩来组成不变矩组来表示点云局部的几何特征。
　　![](http://7xvzfz.com1.z0.glb.clouddn.com/%E4%B8%89%E7%BB%B4%E7%82%B9%E4%BA%91%E4%B8%8D%E5%8F%98%E7%9F%A9%E7%BB%84.png)
　　对于有颜色的点云，f(x,y,z)是点的灰度值，不变矩量组表示的是颜色和距离关系的局部特征，同时描述了三维点云的色彩结构特征和几何结构特征。对于没有颜色的点云，设定f(x,y,z)=1，那么不变矩表示点的几何距离特征，反映局部点的分布情况及几何结构形态。求解不变矩的步骤如下：
　　(1)根据上文中的方法，估算点云的平均距离。
　　(2)对点云建立树，建立半径为r的局部邻域，本文中为平均距离的4倍。
　　(3)对点云中的每个点，根据上式的方法，求解个3不变矩量，并存储在数组里。对于局部邻域点个数小于某个阈值时，则认为它是噪声点，将它的不变矩量都设为零。
　　
　　（3）基于三维不变矩的ICP拼接
　　三维不变矩表征了点的局部几何特征，用三个不变矩组表示这个特征。因为它具有计算快、特征描述明显、平移不变性、旋转不变性等特性，可以用不变矩的相似性匹配对应点，从而实现点云之间的拼接。
　　(1)首先，粗拼接得到两片对应的初始位置，并用包盒法求得点云P、Q各自的重叠域。
　　(2)根据上面提到的方法，对点云P、Q计算不变矩量。
点云重叠区中的点查找中的对应点。用树找到在中的邻域
对于的所有点，获得它们的不变矩，并把的不变矩表示为，
把当前查找点的不变矩表示为￠。
对邻近的变量，，，：建立树，点查找树距离最短的点
即不变矩最相似的点，把它作为当前查找点的对应点。
重复步骤，直到找到所有重叠区点的对应点，并建立协方差。
根据方法协方差分解，得到变换矩阵、。
根据方法，直到迭代收敛。







　　




　　

















